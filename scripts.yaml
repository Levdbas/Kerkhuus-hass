 # Wakeup script for the bedroom.
 'bedroom_wakeup':
  alias:  Wakker worden!
  sequence:
  - service: light.turn_on
    data_template:
      entity_id: light.hue_bloom_1
      brightness: 1
      xy_color: [0.3698, 0.3723]
  - delay:
      seconds: 1
  - service: light.turn_on
    data_template:
      entity_id: light.hue_bloom_1
      brightness: 255
      transition: "{{ alarm_offset | multiply(60) }}"
  - delay:
        minutes: "{{ alarm_offset | int }}"
  - data:
      entity_id: media_player.slaapkamer
      volume_level: '.08'
    service: media_player.volume_set
  - data:
      entity_id: media_player.slaapkamer
      sleep_time: 1800 # Setting the sleep timer. Time in seconds.
    service: sonos.set_sleep_timer
  - data:
      entity_id: media_player.slaapkamer
      shuffle: "true"
    service: media_player.shuffle_set
  - data:
      entity_id: media_player.slaapkamer
      source: Discover Weekly
    service: media_player.select_source
  # Start volume increments. Might be a better way, but hey :D
  # We build up our volume from .05 to 0.11 by increments of 15 seconds.
  # Total duration 1 minute 45 seconds to build up.
  - delay:
        seconds: 15
  - data:
      entity_id: media_player.slaapkamer
      volume_level: '.05'
    service: media_player.volume_set
  - delay:
        seconds: 15
  - data:
      entity_id: media_player.slaapkamer
      volume_level: '.06'
    service: media_player.volume_set
  - delay:
        seconds: 15
  - data:
      entity_id: media_player.slaapkamer
      volume_level: '.07'
    service: media_player.volume_set
  - delay:
        seconds: 15
  - data:
      entity_id: media_player.slaapkamer
      volume_level: '.08'
    service: media_player.volume_set
  - delay:
        seconds: 15
  - data:
      entity_id: media_player.slaapkamer
      volume_level: '.09'
    service: media_player.volume_set
  - delay:
        seconds: 15
  - data:
      entity_id: media_player.slaapkamer
      volume_level: '.10'
    service: media_player.volume_set
  - delay:
        seconds: 15
  - data:
      entity_id: media_player.slaapkamer
      volume_level: '.11'
    service: media_player.volume_set
  # end volume increase

  # start delay before turning off the lights
  - delay:
        minutes: 30
  - service: light.turn_off
    entity_id: light.hue_bloom_1